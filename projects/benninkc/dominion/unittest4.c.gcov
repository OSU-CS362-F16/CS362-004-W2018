        -:    0:Source:unittest4.c
        -:    0:Graph:unittest4.gcno
        -:    0:Data:unittest4.gcda
        -:    0:Runs:3
        -:    0:Programs:1
        -:    1:/*********************************************************************
        -:    2: ** Author: Casey Bennink ONID: benninkc
        -:    3: ** Date: 2/4/18
        -:    4: ** Description: Assignment 3 unittest4.c
        -:    5: ** unit test for gainCard
        -:    6:*********************************************************************/
        -:    7:#include "dominion.h"
        -:    8:#include "dominion_helpers.h"
        -:    9:#include <string.h>
        -:   10:#include <stdio.h>
        -:   11:#include <assert.h>
        -:   12:#include "rngs.h"
        -:   13:
        -:   14:#define NOISY_TEST 1
        -:   15:
function main called 3 returned 100% blocks executed 82%
        3:   16:int main() 
        -:   17:{
        3:   18:    int seed = 1024;
        3:   19:    int numPlayer = 4;
        -:   20:    int p;
        3:   21:	int k[10] = {adventurer, council_room, feast, gardens, mine, remodel, smithy, village, baron, great_hall};
        -:   22:    
        -:   23:    struct gameState G;
        -:   24:	int fCount, dkCount, dscCount, hCount, sCount, supplyPos;
        -:   25:
        3:   26:    printf ("TESTING gainCard\n");
call    0 returned 100%
       15:   27:    for (p = 0; p < numPlayer; p++) {
branch  0 taken 80%
branch  1 taken 20% (fallthrough)
      336:   28:        for (supplyPos = 0; supplyPos < treasure_map+1; supplyPos++)  {
branch  0 taken 96%
branch  1 taken 4% (fallthrough)
        -:   29:			#if (NOISY_TEST == 1)
      324:   30:				printf("Test player %d with %d supply position.\n", p, supplyPos);
call    0 returned 100%
        -:   31:			#endif
        -:   32:
      324:   33:            memset(&G, 23, sizeof(struct gameState));
      324:   34:            initializeGame(numPlayer, k, seed, &G);
call    0 returned 100%
        -:   35:				
      324:   36:			dkCount = 50, hCount = 5, dscCount = 0, sCount = 100;
        -:   37:
      324:   38:            G.deckCount[p] = dkCount;
      324:   39:			G.handCount[p] = hCount;
      324:   40:			G.discardCount[p] = dscCount;
      324:   41:			G.supplyCount[supplyPos] = sCount;
        -:   42:
      324:   43:			fCount = 0;
      324:   44:			dscCount++;
      324:   45:			sCount--;
        -:   46:
      324:   47:			gainCard(supplyPos, &G, fCount, p);
call    0 returned 100%
        -:   48:
        -:   49:			#if (NOISY_TEST == 1)
      324:   50:				printf("discard count = %d, expected = %d\n", G.discardCount[p], dscCount);
call    0 returned 100%
      324:   51:				printf("supply count = %d, expected = %d\n", G.supplyCount[supplyPos], sCount);
call    0 returned 100%
        -:   52:			#endif
      324:   53:			assert(G.discardCount[p] == dscCount);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
      324:   54:			assert(G.supplyCount[supplyPos] == sCount);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
        -:   55:
      324:   56:			fCount = 1;
      324:   57:			dkCount++;
      324:   58:			sCount--;
        -:   59:
      324:   60:			gainCard(supplyPos, &G, fCount, p);
call    0 returned 100%
        -:   61:
        -:   62:			#if (NOISY_TEST == 1)
      324:   63:				printf("deck count = %d, expected = %d\n", G.deckCount[p], dkCount);
call    0 returned 100%
      324:   64:				printf("supply count = %d, expected = %d\n", G.supplyCount[supplyPos], sCount);
call    0 returned 100%
        -:   65:			#endif
      324:   66:			assert(G.deckCount[p] == dkCount);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
      324:   67:			assert(G.supplyCount[supplyPos] == sCount);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
        -:   68:
      324:   69:			fCount = 2;
      324:   70:			hCount++;
      324:   71:			sCount--;
        -:   72:
      324:   73:			gainCard(supplyPos, &G, fCount, p);
call    0 returned 100%
        -:   74:
        -:   75:			#if (NOISY_TEST == 1)
      324:   76:				printf("hand count = %d, expected = %d\n", G.handCount[p], hCount);
call    0 returned 100%
      324:   77:				printf("supply count = %d, expected = %d\n", G.supplyCount[supplyPos], sCount);
call    0 returned 100%
        -:   78:			#endif
      324:   79:			assert(G.handCount[p] == hCount);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
      324:   80:			assert(G.supplyCount[supplyPos] == sCount);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
        -:   81:               
      324:   82:			puts("");
call    0 returned 100%
        -:   83:        }
        -:   84:    }
        -:   85:
        3:   86:    printf("TESTS PASSED\n");
call    0 returned 100%
        -:   87:
        3:   88:    return 0;
        -:   89:}
